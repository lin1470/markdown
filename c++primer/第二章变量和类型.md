[TOC]

## 引用

引用为对象起林外一个名字,通过将声明符&d的形式来蒂尼引用类型,其中d是声明的变量名.

```c++
int ival = 1024;
int &refVal = ival;
int &refVal2; // 报错:引用必须被初始化
```

引用和初始值绑定在一起,而不是拷贝给引用.引用将和初始化对象一直绑定在一起.**无法重新绑定到另外一个对象,因此引用必须初始化.而且不能绑定字面值或者某个表达式结果,只能是对象.**

所有对引用的操作都是对绑定值的操作.

**引用本身不是一个对象,因此不能定义引用的引用.**

## 指针

指针与引用的不同:

1. 指针本身是一个对象语序对指针复制和拷贝,而且指针可以先后指向几个不同的对象
2. 指针无须定义时赋值
3. 和其他内置类型一样,在块作用域内定义的指针如果没有被初始化,也将拥有一个不确定的值

获取对象的地址:用取地址符(&)

```c++
int *p = &ival
```

引用不是对象,没有实际地址,因此不能定义指向引用的指针.

**指针值:**

指针值应属于下列四中状态之一:

1. 指向一个对象
2. 指向紧邻对象所占空间的下一个位置
3. 空指针,意味着指针没有指向任何对象
4. 无效指针,也就是上述情况之外的其他

如果指针指向一个对象允许使用解引用符(*)来访问对象:

```c++
int ival = 42;
int *p = &ival;
cout<< *p;
```

### 空指针

不指向任何对象,生成空指针的方法:

```c++
int *p1 = nullptr; // 等价于int *p1 = 0;
int *p2 = NULL; //等价于 int *p2 =0;
int *p3;
p3 = 0; //这个也是空指针
```

最直接的放啊就是用字面值nullptr来初始化针织.过去的程序会用一个NULL的预处理变量来给指针复制,这个变量在头文件cstdlib中定义,值为0.

把int变量直接赋值给指针是错误的操作,即使Int变量的值恰好等于0也不行.

```c++
int zero =0;
pi =zero; //错误:不能把int变量赋值给指针
```

没有初始化就使用指针的错误是很常见的,而且引发的错误很是巨大.

### void* 指针

void*是一种特殊的指针类型,可以存放任意对象的地址,但是并不知道地址中到底是什么类型的对象.

```c++
double obj = 3.14,*pd = &obj;
void *pv = =&obj; //obj可以是任意类型的对象
pv = pd; //pvk可存放任意类型的指针.
```

不能直接操作void指针所指的对象,因为我们并不知道对象到底是什么类型的.

### 指向指针的引用

```c++
int i= 42;
int *p;	
int *&r = p; //r是一个队指针p的引用
r = &i; // r 是引用了一个指针
*r =0; // 通过解引用来操作对象
```

要理解r是什么类型的,最简单的方法就是**从右向左阅读r的定义**.离变量名最近的符号对变量类型有最直接的影响,因此r是一个引用,然后*说明r引用的是一个 指针,最后int说明是一个int指针.

### const限定符

允许敞亮引用绑定非常量的对象,字面值,甚至是一个表达式:

```c++
int i= 42;
const int &r1 =i;
const int &r2 =42; //正确
const int &r3 = r1*2; //正确
```

const引用可以绑定非常量类型,但是不允许通过改引用来修改对象的值.

### 指针和const

指向常量的指针可以指向常量或者非常量,但是不能通过其来改变所指对象的值.

常量指针和指向常量的指针:

```c++
const int *p = 0;  // 指向常量的指针
int *const p = 0;   // 常量指针
```

常量指针可以指向常量和非常量,但是能不能通过其改变完全取决于指向的类型.

指向常量的指针则完全不能通过其来改变.

### 顶层const

顶层const指针本身是一个常量,但是能不能改变看情况

底层const指针指向的是一个常量,肯定不能通过其来改变,没毛病.

## 处理类型

### 类型别名

```c++
typedef double wages; // wages是double的同义词
typedef wages base, *p; // base是double的同义词,p 是double*的同义词
```

新标准有一种新方法,使用别名声明类来邓颖怡类型别名:

using SI = Sales_item; //SI是Scale_item的同义词

**指针,常量和类型别名**

```c++
typedef char *pstring;
const pstring cstr =0; //cstr是指向char的常量指针
const pstring *ps; // ps是一个指针,它的对象是指向char的常量指针
```

pstring 实际上就是类型char*的别名.